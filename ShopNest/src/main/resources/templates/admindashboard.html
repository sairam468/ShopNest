<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ShopNest | Admin Dashboard</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />

<style>
body { background-color:#f4f6f9; overflow-x:hidden; }

/* SIDEBAR */
.sidebar {
  position: fixed;
  top: 56px;
  left: 0;
  width: 240px;
  height: calc(100vh - 56px);
  background: #212529;
  padding: 1rem;
  overflow-y: auto;
}

/* MAIN */
.main-content {
  margin-left: 240px;
  padding: 1.5rem;
}

/* CATEGORY LINKS */
.category-link {
  color: #dee2e6;
  padding: 10px 14px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  gap: 12px;
  text-decoration: none;
  margin-bottom: 6px;
}
.category-link:hover {
  background: #343a40;
  color: #fff;
}

/* PRODUCT CARD */
.product-card {
  transition: .3s;
}
.product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 25px rgba(0,0,0,.15);
}
.product-card img {
  height: 180px;
  object-fit: contain;
}

/* ADMIN ACTIONS */
.admin-actions .btn {
  margin: 0 4px;
}

/* MOBILE */
@media (max-width: 768px) {
  .sidebar { left: -260px; }
  .sidebar.show { left: 0; }
  .main-content { margin-left: 0; }
}
</style>
</head>

<body>

<!-- ================= NAVBAR ================= -->
<nav class="navbar navbar-dark bg-primary px-3 fixed-top">

  <button class="btn btn-outline-light d-lg-none me-2"
          onclick="document.getElementById('sidebar').classList.toggle('show')">
    <i class="bi bi-list"></i>
  </button>

  <a class="navbar-brand fw-bold d-flex align-items-center gap-2"
     th:href="@{/admin/dashboard}">
    <img th:src="@{/shopnest-logo.png}" height="36">
    ShopNest <span class="badge bg-warning text-dark">ADMIN</span>
  </a>

  <!-- ADD PRODUCT -->
  <a th:href="@{/admin/products/add}"
     class="btn btn-light btn-sm ms-auto">
    <i class="bi bi-plus-circle"></i> Add Product
  </a>

  <a th:href="@{/logout}" class="btn btn-outline-light btn-sm ms-2">
    <i class="bi bi-box-arrow-right"></i>
  </a>
</nav>

<!-- ================= SIDEBAR (CATEGORIES) ================= -->
<div class="sidebar d-flex flex-column" id="sidebar">

  <h6 class="text-center text-white mb-3">
    <i class="bi bi-tags-fill"></i> CATEGORIES
  </h6>

  <a th:each="cat : ${categories}"
     th:href="@{/admin/category/{id}(id=${cat.id})}"
     class="category-link">
    <i class="bi bi-tag-fill text-primary"></i>
    <span th:text="${cat.categories}">Category</span>
  </a>

</div>

<!-- ================= CONTENT (PRODUCTS) ================= -->
<div class="main-content">

  <h4 class="mb-4">Manage Products</h4>

  <div class="row g-4">

    <div class="col-lg-3 col-md-4 col-sm-6"
         th:each="product : ${products}">

      <div class="card product-card h-100 shadow-sm">

        <img th:src="${'/' + product.imageUrl}"
             th:alt="${product.name}"
             class="card-img-top"/>

        <div class="card-body text-center">
          <h6 th:text="${product.name}">Product</h6>
          <p class="fw-bold text-success">
            â‚¹<span th:text="${product.unitPrice}">0</span>
          </p>
          <small class="text-muted"
                 th:text="${product.category.categories}">
            Category
          </small>
        </div>

        <!-- ADMIN CONTROLS -->
        <div class="card-footer bg-white text-center admin-actions">

          <a th:href="@{/admin/products/edit/{id}(id=${product.id})}"
             class="btn btn-warning btn-sm">
            <i class="bi bi-pencil-square"></i>
          </a>

          <a th:href="@{/admin/products/delete/{id}(id=${product.id})}"
             class="btn btn-danger btn-sm"
             onclick="return confirm('Delete this product?')">
            <i class="bi bi-trash-fill"></i>
          </a>

        </div>

      </div>
    </div>

  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
